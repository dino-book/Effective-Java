## 61 박싱된 기본 타입보다는 기본 타입을 사용하라

기본 타입과 박싱된 기본 타입의 주된 차이는 크게 세 가지다. 

1. 기본 타입은 값만 갖고 있으나, 박싱된 기본 타입은 값에 더해 식별성이란 속성을 갖는다. 달리 말하면, 박싱된 기본 타입의 두 인스턴스는 값이 같아도 서로 다르다고 식별될 수 있다.
2. 기본 타입의 값은 언제나 유효하나, 박싱된 기본 타입은 유효하지 않은 값, 즉 `null`을 가질 수 있다.
3. 기본 타입이 박싱된 기본 타입보다 시간과 메모리 사용면에서 더 효율적이다.

<br />

```java
// 잘못 구현된 비교자
Comparator<Integer> naturalOrder = (i, j) -> (i < j) ? -1 : (i == j ? 0 : 1);

naturalOrder.compare(new Integer(42), new Integer(42)); // 1을 출력한다.
```

첫 번째 검사에서는 `i`와 `j`가 참조하는 오토박싱된 `Integer` 인스턴스가 기본 타입 값으로 변환되며 잘 작동한다. 다만 두 번째 검사에서 두 '객체 참조'의 식별성을 검사하게 된다. `i`와 `j`가 서로 다른 `Integer` 인스턴스라면 값이 같더라도 이 비교의 결과는 `false`가 된다. 이처럼 박싱된 기본 타입에 `==` 연산자를 사용하면 오류가 발생한다.

<br />

기본 타입과 박싱된 기본 타입을 혼용한 연산에서는 박싱된 기본 타입의 박싱이 자동으로 풀린다. 그리고 `null` 참조를 언박싱하면 `NullPointerException`이 발생한다.

<br />

박싱된 기본 타입을 써야 하는 경우는 다음과 같다.

1. 컬렉션의 원소, 키, 값. 컬렉션은 기본 타입을 담을 수 없으므로 어쩔 수 없이 박싱된 기본 타입을 써야 한다.
2. 매개변수화 타입이나 매개변수화 메서드의 타입 매개변수로는 박싱된 기본 타입을 써야 한다. 자바 언어가 타입 매개변수로 기본 타입을 지원하지 않기 때문이다.
3. 리플렉션을 통해 메서드를 호출할 때도 박싱된 기본 타입을 사용해야 한다.

